<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Document</title>
    <link rel="stylesheet" href="adminPage.css">
    <script>
        $(() => {
            const socket = io.connect('http://localhost:3000');

            socket.on('ADMIN_DATAS', (data) => {
                for(var i = 0; i < data.length; i++){
                    let veri = data[i];
                    $('.DataBase').append(
                    `<div class="userData">
                        <div class="datas">
                            <a class="home nameHome">Name: <a class="name">${veri.name}</a></a>
                            <a class="home surnameHome">Surname: <a class="surname">${veri.surname}</a></a>
                            <a class="home yearHome">Year: <a class="year">${veri.year}</a></a>
                            <a class="home usernameHome">Username: <a class="username">${veri.username}</a></a>
                            <a class="home passwordHome">Password: <a class="password">${veri.password}</a></a>
                            <button class="button">Delete</button>
                        </div>
                    </div>`
                    );
                }
            });

            const Form = document.getElementById('form');
            const Buton = document.getElementById('buton');
            Buton.value = 'Kontrol et';

            const Username = document.getElementById('username');
            const Password = document.getElementById('password');
            Form.addEventListener('submit', e => {
                e.preventDefault();
                const username = Username.value;
                const password = Password.value;

                socket.emit('IM_ADMIN', { username, password });

                Username.value = '';
                Password.value = '';
            });

            socket.on('TRUE_ADMIN_DATA', () => {
                $('.form').hide();
                $('.DataBase').show();
            });
            socket.on('CLEAR_TEXT', () => {
                $('.form-text').html('');
            });
            socket.on('CONTROL-1', () => {
                $('.form-text').html('Kontrol ediliyor.');
            });
            socket.on('CONTROL-2', () => {
                $('.form-text').html('Kontrol ediliyor..');
            });
            socket.on('CONTROL-3', () => {
                $('.form-text').html('Kontrol ediliyor...');
            });
        });
    </script>
</head>
<body>
    <div class="hero">
        <h1 class="hero-title">Admin Page</h1>
    </div>
    <hr class="privateHR-1">
    <div class="DataBaseHome">
        <h3 class="text">Veri tabanına kayıtlı kullanıcılar</h3>
        <hr class="privateHR-2">
    </div>
    <div class="form">
        <div class="form-text">Lütfen alanı doldurunuz</div>
        <form id="form">
            <input type="text" id="username" autocomplete="off"> Kullanıcı adı? <br>
            <br>
            <input type="password" id="password" autocomplete="off"> Şifre? <br>
            <br>
            <div class="butonHome">
                <input type="submit" id="buton">
            </div>
        </form>
    </div>
    <div class="DataBase">
        <!-- User datas -->
    </div>
</body>
</html>